<!-- feedbacks.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Feedback</title>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js"></script>
</head>
<body>
  <h2>All Submitted Feedback</h2>
  <div id="feedbackList">Loading...</div>
  <a href="index.html">Go Back</a>

  <script type="module">
    // Firebase Config (same as index.html)
    const firebaseConfig = {
      apiKey: "AIzaSyCnj-psCrzrCE-YlgqqQfXKPIzkU39tQzg",
  authDomain: "feedback-web-1ce2d.firebaseapp.com",
  projectId: "feedback-web-1ce2d",
  storageBucket: "feedback-web-1ce2d.firebasestorage.app",
  messagingSenderId: "159465620227",
  appId: "1:159465620227:web:07adda9526a1eea1015f36"
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getFirestore, collection, getDocs, orderBy, query } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const feedbackList = document.getElementById('feedbackList');

    async function loadFeedbacks() {
      const feedbacksCol = collection(db, "feedbacks");
      const q = query(feedbacksCol, orderBy("timestamp", "desc"));
      const feedbacksSnapshot = await getDocs(q);

      if (feedbacksSnapshot.empty) {
        feedbackList.innerHTML = "<p>No feedback found.</p>";
        return;
      }

      let html = "<ul>";
      feedbacksSnapshot.forEach(doc => {
        const data = doc.data();
        html += `<li><strong>${data.name}</strong>: ${data.feedback}</li><br>`;
      });
      html += "</ul>";

      feedbackList.innerHTML = html;
    }

    loadFeedbacks();
  </script>
</body>
</html>
